<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Portfolio di Vincenzo Rocca - Full Stack Developer specializzato in React, Laravel e tecnologie moderne. Scopri i miei progetti e competenze." />
    <meta name="keywords" content="Vincenzo Rocca, Full Stack Developer, React, Laravel, JavaScript, PHP, Portfolio, Web Developer" />
    <meta name="author" content="Vincenzo Rocca" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Vincenzo Rocca - Full Stack Developer" />
    <meta property="og:description" content="Portfolio di Vincenzo Rocca - Full Stack Developer specializzato in React, Laravel e tecnologie moderne." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://vincenzorocca.dev" />
    <meta property="og:image" content="/og-image.jpg" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Vincenzo Rocca - Full Stack Developer" />
    <meta name="twitter:description" content="Portfolio di Vincenzo Rocca - Full Stack Developer specializzato in React, Laravel e tecnologie moderne." />
    <meta name="twitter:image" content="/og-image.jpg" />
    
    <title>Vincenzo Rocca - Full Stack Developer | Portfolio</title>
    <script type="module" crossorigin src="/assets/index-BKLvCjHe.js"></script>    <link rel="modulepreload" crossorigin href="/assets/vendor-dQk0gtQ5.js">
    <link rel="modulepreload" crossorigin href="/assets/vendor-dQk0gtQ5.js">
    <link rel="modulepreload" crossorigin href="/assets/router-qtbhp7Me.js">
    <link rel="modulepreload" crossorigin href="/assets/ui-KUd19APl.js">
    <link rel="stylesheet" crossorigin href="/assets/index-CoZPpuo8.css">

    <!-- Custom Toast Notifications CSS -->
    <style>
      /* Toast Container */
      .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 10000;
        pointer-events: none;
      }
      
      /* Toast Styles */
      .toast {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        margin-bottom: 12px;
        transform: translateX(400px);
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        pointer-events: auto;
        max-width: 400px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.1);
      }
      
      .toast.show {
        transform: translateX(0);
        opacity: 1;
      }
      
      .toast.success {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      }
      
      .toast.error {
        background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
      }
      
      .toast.warning {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }
      
      .toast.info {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }
      
      /* Toast Content */
      .toast-content {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      .toast-icon {
        font-size: 20px;
        flex-shrink: 0;
      }
      
      .toast-message {
        flex: 1;
        font-weight: 500;
        line-height: 1.4;
      }
      
      .toast-close {
        background: none;
        border: none;
        color: white;
        font-size: 18px;
        cursor: pointer;
        padding: 0;
        margin-left: 8px;
        opacity: 0.7;
        transition: opacity 0.2s;
      }
      
      .toast-close:hover {
        opacity: 1;
      }
      
      /* Progress Bar */
      .toast-progress {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        background: rgba(255,255,255,0.3);
        border-radius: 0 0 12px 12px;
        animation: toast-progress 4s linear forwards;
      }
      
      @keyframes toast-progress {
        from { width: 100%; }
        to { width: 0%; }
      }
      
      /* Mobile Responsive */
      @media (max-width: 480px) {
        .toast-container {
          top: 10px;
          right: 10px;
          left: 10px;
        }
        
        .toast {
          transform: translateY(-100px);
          max-width: none;
        }
        
        .toast.show {
          transform: translateY(0);
        }
      }
    </style>

    <!-- Protezione Ottimizzata Console & Loop -->
    <script>
      (function() {
        'use strict';
        
        // Rilevamento ambiente
        const isProduction = window.location.hostname !== 'localhost' && 
                            window.location.hostname !== '127.0.0.1' && 
                            window.location.hostname !== '0.0.0.0';
        
        // Gestione Console Silenziosa per Produzione
        if (isProduction) {
          const originalConsole = {
            log: console.log,
            info: console.info,
            warn: console.warn,
            error: console.error,
            debug: console.debug,
            trace: console.trace
          };
          
          // Nascondi tutto in produzione tranne errori critici
          console.log = function() {};
          console.info = function() {};
          console.debug = function() {};
          console.trace = function() {};
          console.warn = function() {};
          
          // Solo errori critici dell'applicazione
          console.error = function(message, ...args) {
            if (typeof message === 'string' && 
                !message.includes('Performance') && 
                !message.includes('performance') &&
                !message.includes('Interval') &&
                !message.includes('Loop') &&
                !message.includes('Excessive') &&
                !message.includes('cleanup')) {
              originalConsole.error(message, ...args);
            }
          };
          
          // Funzioni di controllo per sviluppatori
          window.restoreConsole = function() {
            Object.assign(console, originalConsole);
            console.log('🔧 Console ripristinata per debugging');
          };
          
          window.hideConsole = function() {
            console.log = console.info = console.debug = console.trace = console.warn = function() {};
          };
        }
        
        // Sistema Anti-Loop Ottimizzato
        const LoopProtection = {
          intervals: new Set(),
          timeouts: new Set(),
          frames: new Set(),
          
          init: function() {
            this.wrapTimers();
            this.setupErrorHandling();
            this.setupCleanup();
          },
          
          wrapTimers: function() {
            // setInterval ottimizzato
            const origSetInterval = window.setInterval;
            window.setInterval = function(callback, delay, ...args) {
              const safeCallback = function() {
                try {
                  callback.apply(this, arguments);
                } catch (error) {
                  if (!isProduction) console.error('Errore interval:', error);
                  clearInterval(intervalId);
                }
              };
              const intervalId = origSetInterval.call(window, safeCallback, Math.max(delay, 16), ...args);
              LoopProtection.intervals.add(intervalId);
              return intervalId;
            };
            
            const origClearInterval = window.clearInterval;
            window.clearInterval = function(id) {
              LoopProtection.intervals.delete(id);
              return origClearInterval.call(window, id);
            };
            
            // setTimeout ottimizzato
            const origSetTimeout = window.setTimeout;
            window.setTimeout = function(callback, delay, ...args) {
              const safeCallback = function() {
                try {
                  callback.apply(this, arguments);
                } catch (error) {
                  if (!isProduction) console.error('Errore timeout:', error);
                }
                LoopProtection.timeouts.delete(timeoutId);
              };
              const timeoutId = origSetTimeout.call(window, safeCallback, Math.max(delay, 0), ...args);
              LoopProtection.timeouts.add(timeoutId);
              return timeoutId;
            };
            
            const origClearTimeout = window.clearTimeout;
            window.clearTimeout = function(id) {
              LoopProtection.timeouts.delete(id);
              return origClearTimeout.call(window, id);
            };
            
            // requestAnimationFrame ottimizzato
            const origRAF = window.requestAnimationFrame;
            window.requestAnimationFrame = function(callback) {
              const safeCallback = function(timestamp) {
                try {
                  callback.call(this, timestamp);
                } catch (error) {
                  if (!isProduction) console.error('Errore animation frame:', error);
                }
                LoopProtection.frames.delete(frameId);
              };
              const frameId = origRAF.call(window, safeCallback);
              LoopProtection.frames.add(frameId);
              return frameId;
            };
            
            const origCAF = window.cancelAnimationFrame;
            window.cancelAnimationFrame = function(id) {
              LoopProtection.frames.delete(id);
              return origCAF.call(window, id);
            };
          },
          
          setupErrorHandling: function() {
            window.addEventListener('error', (event) => {
              if (event.error && event.error.message && 
                  (event.error.message.includes('Maximum call stack') || 
                   event.error.message.includes('too much recursion'))) {
                if (!isProduction) console.error('🚨 Loop infinito rilevato, pulizia in corso');
                this.emergencyCleanup();
              }
            });
          },
          
                     setupCleanup: function() {
             // Usa Page Visibility API invece di beforeunload (deprecato)
             if (typeof document.addEventListener === 'function') {
               document.addEventListener('visibilitychange', () => {
                 if (document.visibilityState === 'hidden') {
                   this.emergencyCleanup();
                 }
               });
             }
           },
          
          emergencyCleanup: function() {
            this.intervals.forEach(id => clearInterval(id));
            this.intervals.clear();
            this.timeouts.forEach(id => clearTimeout(id));
            this.timeouts.clear();
            this.frames.forEach(id => cancelAnimationFrame(id));
            this.frames.clear();
            if (!isProduction) console.warn('🧹 Pulizia di emergenza completata');
          }
        };
        
        // Inizializza protezioni
        LoopProtection.init();
        
        // Esponi funzione di emergenza
        window.emergencyCleanup = () => LoopProtection.emergencyCleanup();
        
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <div class="toast-container" id="toast-container"></div>

    <!-- Custom Toast JavaScript -->
    <script>
      class ToastManager {
        constructor() {
          this.container = document.getElementById('toast-container');
          this.toasts = [];
        }
        show(message, type = 'info', duration = 4000) {
          const toast = this.createToast(message, type, duration);
          this.container.appendChild(toast);
          this.toasts.push(toast);
          setTimeout(() => toast.classList.add('show'), 100);
          setTimeout(() => this.remove(toast), duration);
          return toast;
        }
        createToast(message, type, duration) {
          const toast = document.createElement('div');
          toast.className = `toast ${type}`;
          const icons = {
            success: '✅',
            error: '❌',
            warning: '⚠️',
            info: 'ℹ️'
          };
          toast.innerHTML = `
            <div class="toast-content">
              <span class="toast-icon">${icons[type] || icons.info}</span>
              <span class="toast-message">${message}</span>
              <button class="toast-close" onclick="window.toastManager.remove(this.parentElement.parentElement)">×</button>
            </div>
            <div class="toast-progress"></div>
          `;
          return toast;
        }
        remove(toast) {
          if (!toast || !toast.parentElement) return;
          toast.classList.remove('show');
          setTimeout(() => {
            if (toast.parentElement) toast.parentElement.removeChild(toast);
            const index = this.toasts.indexOf(toast);
            if (index > -1) this.toasts.splice(index, 1);
          }, 400);
        }
        success(message, duration) { return this.show(message, 'success', duration); }
        error(message, duration) { return this.show(message, 'error', duration); }
        warning(message, duration) { return this.show(message, 'warning', duration); }
        info(message, duration) { return this.show(message, 'info', duration); }
      }

      window.toastManager = new ToastManager();
      window.originalAlert = window.alert;
      window.alert = function(message) {
        window.toastManager.error(message);
      };
      window.originalConfirm = window.confirm;
      window.confirm = function(message) {
        return window.originalConfirm(message);
      };
      window.showToast = (message, type, duration) => window.toastManager.show(message, type, duration);
      window.showSuccess = (message, duration) => window.toastManager.success(message, duration);
      window.showError = (message, duration) => window.toastManager.error(message, duration);
      window.showWarning = (message, duration) => window.toastManager.warning(message, duration);
      window.showInfo = (message, duration) => window.toastManager.info(message, duration);
    </script>
  </body>
</html>
